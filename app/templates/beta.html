<!DOCTYPE html>

<html>

    <head>
        <title>Графы</title>

        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
        <script src="https://cdn.jsdelivr.net/lodash/4.17.4/lodash.min.js"></script>
        <script src="http://cytoscape.github.io/cytoscape.js/api/cytoscape.js-latest/cytoscape.min.js"></script>
        <script src="cytoscape-edge.js"></script>

        <style>
            body {
                font-family: helvetica;
                font-size: 14px;
            }
            #cy {
                width: 100%;
                height: 100%;
                position: absolute;
                left: 0;
                top: 0;
                z-index: 999;
            }
            h1 {
                opacity: 0.5;
                font-size: 1em;
            }
            #buttons {
                position: absolute;
                right: 0;
                bottom: 0;
                z-index: 99999;
            }
        </style>

        <script>
            window.addEventListener("load", function(){
                var cy = window.cy = cytoscape({
                    container: document.getElementById('cy'),
                    ready: function(){
                    },
                    layout: {
                        name: 'grid',
                        rows: 2,
                        cols: 2
                    },
                    style: [
                        {
                            selector: 'node',
              style: {
                shape: 'round',
                'background-color': '#808000',
                label: 'data(id)',
                'text-valign': 'center',
            'color': 'white',
            'text-outline-width': 1,
            'text-outline-color': 'black'
                            }
                        },
                        // some style for the ext
                        {
                            selector: '.edgehandles-hover',
                            css: {
                                'background-color': 'red'
                            }
                        },
                        {
                            selector: '.edgehandles-source',
                            css: {
                                'border-width': 2,
                                'border-color': 'red'
                            }
                        },
                        {
                            selector: '.edgehandles-target',
                            css: {
                                'border-width': 2,
                                'border-color': 'red'
                            }
                        },
                        {
                            selector: '.edgehandles-preview, .edgehandles-ghost-edge',
                            css: {
                                'line-color': 'red',
                                'target-arrow-color': 'red',
                                'source-arrow-color': 'red'
                            }
                        }
                    ]
                });
                cy.edgehandles({
               toggleOffOnLeave: true,
               handleNodes: "node",
               handleSize: 10,
               edgeType: function(){ return 'flat'; }
             });
        var i = 0;
    cy.on('cxttap', 'node' ,function (evt) {
        cy.remove(cy.$("#" + evt.cyTarget.id()));
    });
    cy.on('cxttap', 'edge' ,function (evt) {
        cy.remove(cy.$("#" + evt.cyTarget.id()));
    });
        cy.on('tap', function (e) {
            try{
            e.cyTarget.id();
        } catch(err) {
      i += 1;
cy.add([{
    group : "nodes",
    data : {
        id : i
    },
    renderedPosition : {
        x: event.pageX,
        y: event.pageY
    }
}]);
}
    });
            });
        </script>
    </head>

    <body>
        <h1>Поиск максимальной клики</h1>

        <div id="cy"></div>
    </body>

</html>